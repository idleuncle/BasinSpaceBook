# 私有仓库使用说明


## 私有仓库地址
10.142.55.199:5006
暂不分开发/发布,统一存在该仓库中.

## 私有仓库分类
+ basin
    + basin基础库,以basin前缀命名,例如:
basin/py27-ws


    
+ 业务系统
    + 由业务系统各自构建的库,以业务系统前缀命名, 例如:
bidspy/publisher




## 使用过程:
1. 配置客户端

    PRIVATE_REGISTRY=10.142.55.199
    ```
    echo '{"insecure-registries":["'${PRIVATE_REGISTRY}':5006"]}' > /etc/docker/daemon.json
    ```

2. 私有仓库浏览
访问地址: http://10.142.55.199:18080/
能够浏览当前私有仓库版本信息.

3. 获取仓库版本

    ~~~
    docker pull 10.142.55.199:5006/basin/py27-ws:1.0
    ~~~

4. 镜像上传

    ~~~
    docker tag py27-ws:1.0 10.142.55.199:5006/basin/py27-ws:2.0
    ~~~
    
## 镜像维护说明
1. basin镜像由basin 组用户进行维护.
2. 业务系统镜像由开发人员自行维护.
备注:暂无用户权限区分,增加insecure-registries配置均能修改.


新增basin镜像流程:
1. 通知basin组人员@陈牵,@陈予言,增加镜像或修改镜像,
2. basin组人员评估是否已有镜像或确需要增加镜像
3. basin组人员增加/修改新镜像.


# 持续构建说明

1. 镜像确保持续构建,需将镜像加入持续构建过程,构建流程:
见:[持续交付说明]

针对basin镜像的修改,自动触发构建程序,构建
目前basin 修改basin,


镜像依赖